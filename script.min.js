var z="hide";jQuery(document).ready(function(e){function a(e){e.preventDefault(),e.stopPropagation()}function n(e,a){e.removeClass(z),a.addClass(z)}function t(){m=1,g++,f.text(g),h=window.setTimeout(t,1e3)}function o(){window.clearTimeout(h),e("span#modaltime").text(d(g)),e("div#game-complete-modal").openModal({dismissible:!1}),m=0,g=0,f.text(g)}function s(){window.clearTimeout(h),m=0,g=0,f.text(g)}function d(e){var a=Math.floor(e/60),n=e%60;return 10>n&&(n="0"+n),a+":"+n}function r(){var a=e("input.answer");e("input#blank").focus(),a.bind("blur",function(){var a=e(this);c(a)||a.removeClass("orange").addClass("red")}),a.bind("keypress",function(e){return e.keyCode>57||e.keyCode<48?!1:void 0}),a.bind("focus",function(){m||t(),e(this).addClass("orange lighten-4").val("")}),1==w?u(a):l(a)}function l(a){function n(){var a=e("input.unanswered");a.attr("disabled","disabled").addClass("grey lighten-2"),index=Math.floor(Math.random()*a.length);var n=e(a[index]);n.removeAttr("disabled").removeClass("grey lighten-2").focus()}var t=a.length-1;e("input.unanswered").first().focus(),a.bind("keyup",function(){var a=e(this);c(a)&&(a.removeClass("orange").addClass("green").attr("disabled","disabled").removeClass("unanswered"),t--,t>=0?n():o())})}function u(a){var n=a.length;a.bind("keyup",function(){var a=e(this);c(a)&&(a.removeClass("orange").addClass("green").attr("disabled","disabled").removeClass("unanswered"),n--,n>0?e("input.unanswered").first().focus():o())})}function c(e){var a=parseInt(e.attr("data-x"))*parseInt(e.attr("data-y")),n=parseInt(e.val());return n==a}var v=e("div#gameboard"),f=e("span#time"),m=0,g=0,h="",p=1,w=1,b=e("div#options");e("a#play").click(function(t){a(t),p=e("input#grid-size").val(),w=e("input#difficulty").is(":checked")?1:0,loadGameBoard(p),n(v,b)}),loadGameBoard=function(e){for(s(),html="<div class='grow row-0'><div class='gcol white'>&nbsp;</div>",i=1;i<=e;i++)html+="<div class='gcol blue-grey lighten-3'>"+i+"</div>";for(html+="</div>",i=1;i<=e;i++){for(html+="<div class='grow row-"+i+"'><div class='gcol blue-grey lighten-3'><strong>"+i+"</strong></div>",j=1;j<=e;j++)html+="<div class='gcol'><input type='text' class='answer unanswered' data-x='"+i+"' data-y='"+j+"' maxlength='3' /></div>";html+="</div>"}html+="<p class='flow-text center-align'>Choose A Square And Off You Go</p>",v.html(html),r()},e("a.playagain").click(function(t){a(t),e("div#game-complete-modal").closeModal(),s(),n(b,v)})});